# Титульный лист.

Курсовая работа
по теме: «БД для домашней библиотеки»
по модулю ПМ 11 «Разработка, администрирование и защита баз данных», в частности - МДК.11.01 Технология разработки и защиты баз данных.

Выполнила: Хмеленко Виолетта, 414 группа.




# Задание на курсовую работу:


Специальность: <ins> 09.02.07 "Информационные системы и программирование"  </ins>

Срок представления работы к защите: <ins> 15 ноября 2024 года. </ins>


Перечень подлежащих разработке вопросов:


1. Анализ предметной области. Постановка задачи.

    1.1. Описание предметной области и функции решаемых задач.

    1.2. Перечень входных данных.

    1.3. Перечень выходных данных

    1.4. Ограничения предметной области (если таковые имеются).

    1.5. Взаимодействие с другими программами.



2. Инфологическая (концептуальная) модель базы данных.

    2.1. Выделение информационных объектов.

    2.2. Определение атрибутов объектов.

    2.3. Определение отношений и мощности отношений между объектами.

    2.4. Построение концептуальной модели.

3. Логическая структура БД.



4. Физическая структура базы данных.


5. Реализация проекта в среде конкретной СУБД.

    5.1. Создание таблиц.

    5.2. Создание запросов.

    5.3. Разработка интерфейса.

    5.4. Назначение прав доступа.

    5.5. Создание индексов.

    5.6. Разработка стратегии резервного копирования базы данных


Руководитель работы __________________ <ins> И. В. Пунгин </ins>

Задание принял(а) к исполнению _______________________________ <ins> В. Д. Хмеленко </ins>







# Содержание курсовой работы:

1. Введение.
2. Основная часть работы.
3. Заключение.
4. Список использованных источников.
5. Приложения.





# Введение.


Эта база данных предназначена для хранения информации о книгах в домашней библиотеке и вывода информации об их статусе и источнике получения.

БД будет содержать не только печатные книги, но и журналы, электронные книги и аудиокниги.

Ее разработка будет вестись в PostgreSQL в ОС Linux Ubuntu.






# Основная часть работы.




1. **Анализ предметной области. Постановка задачи.**

    *Описание предметной области и функции решаемых задач.*


	Предметная область этой базы данных – домашняя книжная библиотека, которая содержит бумажные (печатные), журналы, электронные книги и аудиокниги.


	Функции решаемых задач: 

	- вывод информации о статусе книги; 
	- вывод источника получения книги (из обычной библиотеки, куплена, одолжена или получена в подарок);
	- вывод всех книг, хранящихся в домашней библиотеке;
	- вывод книги по нужным параметрам.




	*Входными данными являются:*


    В таблице тип_книги:

	- id_книги - идентификатор книги.
	- тип.
	- количество - количество книг определенного типа.



    В таблице Книги:

	- id_книги - идентификатор книги.
	- название
	- автор
	- год - год выпуска.
	- издатель.
	- количество_страниц
	- жанры.
	- isbn - уникальный код книги.


    В таблице Источники:

	- id_источника - идентификатор источника.
	- источник - название источника.


	

	*Выходными данными являются:*


	В таблице События:

	- id_события - идентификатор события.
	- новый_статус.
	- дата.
	- примечание.
	- id_книги.
	- id_источника.


	- Список книг, которые просто хранятся.
	- Список книг, которые получены от кого-то.
	- Список книг, которые отданы кому-то.	




    *Ограничения предметной области (если таковые имеются).*

	1. По году издания книги (не старше 1900 года и не новее текущего года).
	2. По количеству страниц книги 
		(не 152 страница из 151 существующих, 
		минимум 10-20 страниц, 
		максимум 5000 страниц).



    *Взаимодействие с другими программами:*

	При помощи макросов.	?







1. **Инфологическая (концептуальная) модель базы данных.**


Таблицы-справочники: "Книги", "Тип_книги", "Источники".

Регистрация событий будет вестись в таблице: "События".


Информационные объекты (сущности):

"Книги", "Тип_книги", "Источники", "События".


Книги имеют несколько типов издания: обычная (бумажная) книга, электронная книга, аудиокнига.

Книги могут иметь 2 и более авторов (их указываем в одной строке через запятую).


*Атрибуты объектов:*

- "Книги": id_книги, название, автор, год, издатель, количество_страниц, жанры, isbn.
- "Тип_книги": id_книги, тип, количество.
- "Источники": id_источника, источник.
- "События": id_события, новый_статус, дата, примечание, id_книги, id_источника.



*Отношения между объектами:*

- Между "Книги" и "Тип_книги": один-ко-многим.
- Между "Книги" и "События": один-ко-многим.
- Между "Источники" и "События": один-ко-многим.



*События, связанные с книгой:*

Получили обратно.
Купили.
Взяли в библиотеке.
Получили в подарок.
Нашли.
Обменяли на что-то.

Продали. 
Подарили.
Дали почитать.
Потеряли/порвала собака...
Отдали насовсем.
Сдали в макулатуру.

Дали почитать, и получили обратно.


Местонахождение книги:

В наличии.
На руках у ...
Неизвестно.
Утеряна (уничтожена).
В наличии, но нужно сдать.
Потеряли, но нужно сдать.




*ER-модель.*


![Картинка1] (https://github.com/VividPhoenixGame/Kursovaya_Pungin/blob/main/ERдиаграмма.jpg)






3. **Логическая структура БД.**


![Картинка2] <https://github.com/VividPhoenixGame/Kursovaya_Pungin/blob/main/Логическая_структура.jpg>





4. **Физическая структура базы данных.**
   

	*Таблица 1 — Структура таблицы "Книги":*

	| Поле               | Тип данных   | Комментарий                   |
	| ------------------ | ------------ | ----------------------------- |
	| id_книги           | INT          | Ключ                          |
	| название           | VARCHAR(100) |                               |
	| автор              | VARCHAR(100) |                               |
	| год                | INT          |                               |
	| издатель           | VARCHAR(80)  |                               |
	| количество_страниц | INT          |                               |
	| жанры              | VARCHAR(100) |                               |
	| isbn               | VARCHAR(20)  | Идентификационный номер книги |




	*Таблица 2 — Структура таблицы "Тип_книги":*


	| Поле       | Тип данных  | Комментарий |
	| ---------- | ----------- | ------------|
	| id_книги   | INT         | Ключ        |
	| тип        | VARCHAR(50) |             |
	| количество | INT         |             |
	


	*Таблица 3 — Структура таблицы "События":*


	| Поле         | Тип данных   | Комментарий |
	| ------------ | ------------ | ----------- |
	| id_события   | INT          | Ключ        |
	| новый_статус | VARCHAR(50)  |             |
	| дата         | DATE         |             |
	| примечание   | VARCHAR(100) |             |
	| id_книги     | INT          |             |
	| id_источника | INT          |             |




	*Таблица 4 — Структура таблицы "Источники":*


	| Поле         | Тип данных  | Комментарий  |
	| ------------ | ----------- | ------------ |
	| id_источника | INT         | Ключ         |
	| источник     | VARCHAR(50) |              |






5. **Реализация проекта в среде конкретной СУБД.**

    *5.1. Создание запросов.*
	

	SELECT * FROM События WHERE id_книги = 3;

	SELECT новый_статус FROM События WHERE id_книги = 1;

	SELECT * FROM События WHERE примечание LIKE '%Купили%';
	SELECT * FROM События WHERE примечание = 'Потеряли';

	SELECT * FROM События WHERE id_источника = 2;
	SELECT * FROM События WHERE id_источника = 5;

	SELECT id_источника FROM События WHERE id_книги = 3;

	SELECT количество FROM Тип_книги WHERE id_книги = 1;

	SELECT * FROM Книги WHERE год = 2022;  < - вывод всех книг с определенным годом выпуска (в данном случае 2022-й).

	SELECT * FROM Книги WHERE количество_страниц < 300;  < - вывод книг, в которых количество страниц меньше 300.



	INSERT INTO Книги VALUES (1, 'Цифровая гигиена', 'Игорь Ашманов, Наталья Касперская', '2022', 'ООО Издательство Питер', 508, 'Безопасность в Интернете', '978-5-4461-1938-7');
	INSERT INTO Книги VALUES (2, '100 способов изменить жизнь. Часть первая', 'Лариса Парфентьева', '2016', 'ООО Манн, Иванов, Фербер', 191, 'Саморазвитие', '978-5-0016-9701-5');
	INSERT INTO Книги VALUES (3, 'Чистая архитектура. Искусство разработки программного обеспечения', 'Роберт Мартин', '2022', 'ООО Прогресс книга', 352, 'Компьютерная литература', '978-5-4461-0772-8');


	INSERT INTO Тип_книги VALUES (1, 'Бумажная книга', 0);
	INSERT INTO Тип_книги VALUES (2, 'Электронная книга', 1);
	INSERT INTO Тип_книги VALUES (3, 'Бумажная книга', 1);


	INSERT INTO Источники VALUES (1, 'Городская библиотека');
	INSERT INTO Источники VALUES (2, 'Книжный магазин');
	INSERT INTO Источники VALUES (3, 'Частный магазин');
	INSERT INTO Источники VALUES (4, 'Уличная библиотека');
	INSERT INTO Источники VALUES (5, 'Интернет-магазин');
	INSERT INTO Источники VALUES (6, 'Библиотека Михаила');
	INSERT INTO Источники VALUES (7, 'Библиотека дедушки');


	INSERT INTO События VALUES (1, 'Убыла', '2024-10-17', 'Подарили тете Свете на день рождения', 1, 2);
	INSERT INTO События VALUES (2, 'Прибыла', '2023-07-03', 'Купили со скидкой 50%', 2, 5);
	INSERT INTO События VALUES (3, 'Убыла', '2025-02-09', 'Потеряли', 3, 1);





    *5.2. Назначение прав доступа.*


    Вначале был создан пользователь “vitai”, ему присвоен пароль:

	<https://github.com/VividPhoenixGame/Kursovaya_Pungin/blob/main/users.png

	CREATE USER vitai WITH PASSWORD '80224';


	Ему были присвоены все права на БД:

	GRANT ALL PRIVILEGES ON TABLE vitai TO vitai;



	Сама БД была создана суперпользователем postgres (по умолчанию все БД создаются им).







    *5.3. Создание индексов.*


	Связи в таблицах:


	ALTER TABLE Книги ADD UNIQUE (id_книги);

	ALTER TABLE События ADD UNIQUE (id_книги);

	ALTER TABLE События
	ADD FOREIGN KEY (id_книги) REFERENCES Книги (id_книги);

	ALTER TABLE Тип_книги
	ADD FOREIGN KEY (id_книги) REFERENCES Книги (id_книги);



	ALTER TABLE Источники ADD UNIQUE (id_источника);

	ALTER TABLE События
	ADD FOREIGN KEY (id_источника) REFERENCES Источники (id_источника);


	SELECT * FROM pg_catalog.pg_indexes WHERE tablename = 'Книги'; <- вывод всех индексов в таблице Книги.
	SELECT * FROM pg_catalog.pg_indexes WHERE tablename = 'События';
	SELECT * FROM pg_catalog.pg_indexes WHERE tablename = 'Источники';
	SELECT * FROM pg_catalog.pg_indexes WHERE tablename = 'Тип_книги';





    *5.4. Разработка стратегии резервного копирования.*


	Резервное копирование базы проводилось при помощи команды (вне СУБД PostgresSQL, через консоль):

	pg_dump -U postgres -h localhost -p 5432 homelib -f "/home/kab18-09/Изображения/homelib.sql";


	В результате в папке "Изображения" появился файл "homelib.sql".



	Восстановление проводилось следующим образом:

	1. Была создана другая БД (в данном случае test), которая будет в дальнейшем копией нашей БД с библиотекой: 
	CREATE DATABASE test OWNER postgres;

	2. Был совершен выход в пользователя postgres:
	\q

	3. Для того, чтобы восстановление сработало, файл "homelib.sql" должен находиться в папке Изображения", в которую мы и создавали бэкап.
	
	Далее была совершена команда для восстановления данных из БД с библиотекой в БД test:
	psql -U postgres -h localhost -p 5432 -d test -f "/home/kab18-09/Изображения/homelib.sql";









# Заключение.


В результате была спроектирована и разработана база данных для домашней книжной библиотеки, которая хранит данные о разных типах книг, показывает, какие книги в процессе чтения, а также выводит статус о том, как книги попали в домашнюю библиотеку, от кого и в какое время. 
Также эта БД выводит информацию о том, какие книги взяты в долг, какие нужно сдать в обычную библиотеку и прочие заметки на усмотрение пользователя.

В целом, БД помогает структурировать всю информацию в домашней библиотеке и быстро находить то, что нужно.






# Список использованных источников:


<https://studfile.net/preview/6070312/page:2/
<https://eduherald.ru/ru/article/view?id=20048
<https://multiurok.ru/index.php/files/prakticheskaia-rabota-sozdanie-bd-biblioteka.html
<https://studfile.net/preview/5910972/page:6/
<https://datafinder.ru/products/postgresql-tipy-dannyh
<https://app.creately.com/d/LMe2s1AKgFN/edit
<https://selectel.ru/blog/tutorials/how-to-create-user-postgre/
<https://help.reg.ru/support/servery-vps/oblachnyye-servery/rabota-s-serverom/rezervnoye-kopirovaniye-i-vosstanovleniye-baz-dannykh-postgresql#2






# Приложения.



<https://github.com/VividPhoenixGame/Kursovaya_Pungin/blob/main/ERдиаграмма.jpg

<https://github.com/VividPhoenixGame/Kursovaya_Pungin/blob/main/Логическая_структура.jpg


<https://github.com/VividPhoenixGame/Kursovaya_Pungin/blob/main/users.png
